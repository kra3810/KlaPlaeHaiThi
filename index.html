<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KlaPlaeHaiThi (กล้าแปลให้ที)</title>
    <style>
        :root {
            --bg-color: #2b2b2b;
            --fg-color: #e0e0e0;
            --box-bg: #3c3c3c;
            --border-color: #555;
            --accent-color: #007acc;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--fg-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 90vh;
        }
        main {
            width: 90%;
            max-width: 700px;
        }
        h1 {
            text-align: center;
            color: var(--fg-color);
        }
        h1 span {
            font-size: 0.7em;
            color: #aaa;
        }
        .container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        textarea {
            width: 100%;
            box-sizing: border-box; /* ทำให้ padding ไม่ล้นกรอบ */
            height: 200px;
            font-size: 1.8em;
            background-color: var(--box-bg);
            color: var(--fg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
            font-family: 'Tahoma', 'Leelawadee UI', sans-serif;
        }
        textarea:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 5px var(--accent-color);
        }
        #outputBox {
            background-color: #222; /* ทำให้ช่องผลลัพธ์เข้มกว่า */
        }
        .buttons {
            display: flex;
            gap: 10px;
        }
        button {
            flex-grow: 1;
            padding: 12px;
            font-size: 1em;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        #copyButton {
            background-color: var(--accent-color);
            color: white;
        }
        #copyButton:hover {
            background-color: #0099ff;
        }
        #clearButton {
            background-color: #777;
            color: white;
        }
        #clearButton:hover {
            background-color: #999;
        }
    </style>
</head>
<body>

    <main>
        <h1>KlaPlaeHaiThi<br><span>(กล้าแปลให้ที)</span></h1>
        
        <div class="container">
            <label for="inputBox">พิมพ์อังกฤษ (Pattachote/Kedmanee) ที่นี่:</label>
            <textarea id="inputBox" placeholder="dkssj..."></textarea>
            
            <label for="outputBox">ผลลัพธ์ภาษาไทย (สำหรับ Copy):</label>
            <textarea id="outputBox" readonly placeholder="สวัสดี..."></textarea>
            
            <div class="buttons">
                <button id="copyButton">คัดลอกผลลัพธ์ (Copy)</button>
                <button id="clearButton">ล้าง (Clear)</button>
            </div>
        </div>
    </main>

    <script>
        //
        // *** นี่คือแผนผังคีย์บอร์ด (Key Map) ที่ถูกต้องและสมบูรณ์ครับ ***
        //
        const thaiKeyMap = {
            // แถวบนสุด (Grave/Tilde)
            '`': '_', '~': '%',
            
            // แถวตัวเลข (Numbers)
            '1': 'ๅ', '!': '+',
            '2': '/', '@': '๑',
            '3': '-', '#': '๒',
            '4': 'ภ', '$': '๓',
            '5': 'ถ', '%': '๔',
            '6': 'ุ', '^': 'ู',
            '7': 'ึ', '&': '฿',
            '8': 'ค', '*': '๕',
            '9': 'ต', '(': '๖',
            '0': 'จ', ')': '๗',
            '-': 'ข', '_': '๘',
            '=': 'ช', '+': '๙',

            // แถว QWERTY
            'q': 'ๆ', 'Q': '๐',
            'w': 'ไ', 'W': '"',
            'e': 'ำ', 'E': 'ฎ',
            'r': 'พ', 'R': 'ฑ',
            't': 'ะ', 'T': 'ธ',
            'y': 'ั', 'Y': 'ํ',
            'u': 'ี', 'U': '๊',
            'i': 'ร', 'I': 'ณ',
            'o': 'น', 'O': 'ฯ',
            'p': 'ย', 'P': 'ญ',
            '[': 'บ', '{': 'ฐ',
            ']': 'ล', '}': ',',
            '\\': '.', '|': ':', // นี่คือปุ่ม Backslash ที่ตกหล่นไป

            // แถว ASDF (Home Row)
            'a': 'ฟ', 'A': 'ฤ',
            's': 'ห', 'S': 'ฆ',
            'd': 'ก', 'D': 'ฏ',
            'f': 'ด', 'F': 'โ',
            'g': 'เ', 'G': 'ฌ',
            'h': '้', 'H': '็',
            'j': '่', 'J': '๋',
            'k': 'า', 'K': 'ษ',
            'l': 'ส', 'L': 'ศ',
            ';': 'ว', ':': 'ซ',
            "'": 'ง', '"': '.', // นี่คือปุ่ม ' (Apostrophe)

            // แถว ZXCV (Bottom Row)
            'z': 'ผ', 'Z': '(',
            'x': 'ป', 'X': ')',
            'c': 'แ', 'C': 'ฉ',
            'v': 'อ', 'V': 'ฮ',
            'b': 'ิ', 'B': 'ฺ',
            'n': '์', 'N': '์',
            'm': 'ท', 'M': '?',
            ',': 'ม', '<': 'ฒ',    // นี่คือปุ่ม , (Comma)
            '.': 'ใ', '>': 'ฬ',    // นี่คือปุ่ม . (Period) ที่ถูกต้อง
            '/': 'ฝ', '?': 'ฦ'     // นี่คือปุ่ม / (Slash) ที่ถูกต้อง
        };

        const input = document.getElementById('inputBox');
        const output = document.getElementById('outputBox');
        const copyBtn = document.getElementById('copyButton');
        const clearBtn = document.getElementById('clearButton');

        // ฟังก์ชันแปล
        function translate() {
            let outputText = "";
            for (let char of input.value) {
                outputText += thaiKeyMap[char] || char; // ถ้าหาไม่เจอ ก็ใช้ตัวเดิม (เช่น Space)
            }
            output.value = outputText;
        }

        // แปลแบบ Real-time
        input.addEventListener('keyup', translate);
        input.addEventListener('input', translate); // รองรับการพิมพ์ค้าง

        // ปุ่มคัดลอก
        copyBtn.addEventListener('click', () => {
            if (output.value) {
                navigator.clipboard.writeText(output.value)
                    .then(() => {
                        copyBtn.textContent = 'คัดลอกแล้ว!';
                        setTimeout(() => { copyBtn.textContent = 'คัดลอกผลลัพธ์ (Copy)'; }, 1500);
                    })
                    .catch(err => {
                        console.error('คัดลอกไม่สำเร็จ: ', err);
                    });
            }
        });

        // ปุ่มล้าง
        clearBtn.addEventListener('click', () => {
            input.value = "";
            output.value = "";
            input.focus(); // ย้ายเคอร์เซอร์กลับไปที่ช่อง input
        });

    </script>
</body>
</html>
